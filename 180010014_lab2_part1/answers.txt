What is the minimum lines of C code with which you can achieve the above?

It can be done with as few as 20 lines of C code